<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        .header {
            text-align: center;
            border-bottom: 3px solid black;
        }

        #record {
            height: 60px;
            width : 500px;
            background: rgb(38, 216, 79);
            border: 2px solid rgba(0, 0, 0, 0.802);
            margin: 10px 10px;
            padding: 10px 10px;
        }

        .addName {
            background: rgb(64, 191, 255);
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding : 50px 0;
        }

        .addRecord {
            background: rgb(64, 191, 255);
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding : 50px 0;
            border-top: 2px dotted rgb(0, 0, 0);
        }

        .list1 {
            background-color: rgb(38, 216, 79);
            list-style-type: none;
            padding: 10px 50px;
            border: 2px solid rgba(0, 0, 0, 0.802);

        }

        .footer {
            background: rgb(64, 191, 255);
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding : 50px 0;
        }

        a {
            text-decoration: none;
            color: black;
        }

    </style>
    <title>Hate React Island</title>
</head>
<body>

    <div id="root"></div>

    <script type="text/babel">

        const { useState } = React;

        function Header(props) {

            const onDoubleClickHandler = () => { 
                const ansewer = window.prompt('âš  ë¨¼ì € ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”')
                if(ansewer == 'ìš°ë³„ë¦¼'){
                    alert('ë¦¬ì•¡íŠ¸ë¥¼ ì¢‹ì•„í•˜ëŠ” ì‚¬ëŒë“¤ğŸ’—ì˜ ë°©ëª…ë¡ í˜ì´ì§€ì…ë‹ˆë‹¤ ')
                } else {
                    alert('ë¦¬ì•¡íŠ¸ë¥¼ ì‹«ì–´í•˜ëŠ” ì‚¬ëŒë“¤ğŸ¤®ì˜ ë°©ëª…ë¡ í˜ì´ì§€ì…ë‹ˆë‹¤ ')
                }
            };

            console.log(prompt.value);

            return (
                <div className="header">
                    <h1> âš“ Visitors' Book ğŸ±â€ğŸ‰</h1>
                    <h5><a href="#" onDoubleClick={ onDoubleClickHandler }>ë­í•˜ëŠ” ê³³ì¸ì§€ ê¶ê¸ˆí•˜ë‹¤ë©´ ë”ë¸”í´ë¦­í•´ë³´ì„¸ìš”</a></h5>
                </div>
            );
        }

        function AddName () {

            // Name ëª©ë¡ State
            const [visitor, setVisitor] = useState([
                { id : 1, nic : 'ì•„ë¬´ê°œ'},
                { id : 2, nic : 'ì´ì†Œì˜'}
            ]);

            // Nameì˜ ê°’ì„ ë°›ì„ State
            const [inputText, setInputText] = useState('');

            // Nameì˜ ìƒˆë¡œìš´ Idë¥¼ ë¶€ì—¬í•  State
            const [nextId, setNextId] = useState(3)

            // visitor.idë¥¼ ì¸ìë¡œ ë°›ì•„ vistiorì—ì„œ ì‚­ì œ 
            const onRemove = id => {
                // filter()ëŠ” true ê°’ë§Œ ë°°ì—´ì— ë„£ì–´ì¤Œ
                const changeVisitor = visitor.filter(visitor => visitor.id !== id);
                // filterë¡œ ë§Œë“¤ì–´ì§„ ìƒˆ ëª©ë¡ì„ visitorì˜ ìƒˆë¡œìš´ ê°’ìœ¼ë¡œ ë„£ì–´ì¤Œ
                setVisitor(changeVisitor);
            }

            // inputTextì˜ ê°’ì´ ë°”ë€Œë©´ ë°”ë¡œ setí•´ë‘ëŠ” í•¨ìˆ˜
            const onChangeHandler = e => setInputText(e.target.value);

            // ì¶”ê°€ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ visitor ê°ì²´ ë°°ì—´ì— ìƒˆë¡œìš´ ê°ì²´ë¥¼ ë„£ì–´ì£¼ëŠ” í•¨ìˆ˜
            const onClickHandler = () => {
                // keyê°€ ë  idê°€ 2ë¶€í„° ìˆê¸° ë•Œë¬¸ì— nextIdëŠ” í˜„ì¬ 3, setë˜ì–´ ìˆëŠ” inputTextì˜ ê°’ì„ nicìœ¼ë¡œ ì„¤ì •
                const changeVisitor = visitor.concat({id : nextId, nic : inputText});

                // ìƒˆë¡œìš´ ê°ì²´ ë°°ì—´ ê°’ì´ ì¶”ê°€ëœ ë¦¬ìŠ¤íŠ¸ë¡œ ë³€ê²½
                setVisitor(changeVisitor);
                // ì¶”ê°€ë  ê°’ì„ ìœ„í•´ idë¥¼ ë¯¸ë¦¬ 4ë¡œ ë°”ê¿”ì¤Œ
                setNextId(nextId + 1);
                // ì¶”ê°€ë˜ë©´ì„œ í…ìŠ¤íŠ¸ ì…ë ¥ì°½ì— ì•„ë¬´ê²ƒë„ ì—†ë„ë¡ ë°”ê¿”ì¤Œ
                setInputText('');

            };

            const visitorsList = visitor.map(visitor => <li key={ visitor.id } onDoubleClick={()=>onRemove(visitor.id)}> 
                    {visitor.id % 2 == 1? "ğŸŒ" : "ğŸª"} 
                    { visitor.nic }
                     </li>)

            return (
                <div className="addName">
                    <h2> ğŸ´â€â˜ ï¸ ì´ë¦„ ë‚¨ê¸°ê¸° </h2>
                     í˜„ì¬ {visitorsList.length}ëª…ì´ ì´ë¦„ì„ ë‚¨ê²¼ìŠµë‹ˆë‹¤! <br/><br/>
                    <input value={ inputText } onChange={ onChangeHandler }/><br/>
                    <button onClick={ onClickHandler } id="button2">ì¶”ê°€</button><br/>
                    <b>â€» ì´ë¦„ì„ ì‚­ì œí•˜ë ¤ë©´ ë”ë¸”í´ë¦­í•˜ì„¸ìš”</b><br/>
                    <div className="list1">{ visitorsList.reverse() }</div>
                    <hr/>
                    
                    
                </div>
            );
        }

        function AddRecord() {
            
            const [record, setRecord] = useState([
                {id : 1, rec : 'ã…ã…‡ã…ã…‡'},
                {id : 2, rec : 'ë¦¬ì•¡íŠ¸ ê¼­ ì˜í•´ì•¼ ë˜ëƒ'}
            ]);

            const [inputText, setInputText] = useState('');
            const [nextId, setNextId] = useState(3);

            const onChangeHandler = e => setInputText(e.target.value);

            const onClickHandler = () => {
                const changeRec = record.concat({id : nextId, rec : inputText});
                setRecord(changeRec);
                setNextId(nextId+1);
                setInputText('');
            }

            const onRemove = id => {
                const changeRec = record.filter(record => record.id !== id);
                setRecord(changeRec);
            }

            const recordList = record.map(record => <div id="record" key={record.id} onDoubleClick={()=>onRemove(record.id)}>
                    { record.id % 2 == 1? "ğŸ±â€ğŸš€" : "ğŸ±â€ğŸ‘¤"} 
                    <b>{record.rec}</b><br/><br/>
                    ----------------------------------------------- Date : {new Date().toDateString()}
                    </div>);

            return (
                <div className="addRecord">
                    <h2> ğŸ´â€â˜ ï¸ ë°©ëª…ë¡ ë‚¨ê¸°ê¸° </h2>
                     í˜„ì¬ { record.length }ëª…ì´ ë°©ëª…ë¡ì„ ë‚¨ê²¼ìŠµë‹ˆë‹¤! <br/><br/>
                    <textarea cols="77" rows="10" value={ inputText } onChange={ onChangeHandler }></textarea><br/>
                    <button onClick={ onClickHandler }>ì¶”ê°€</button><br/>
                    <b>â€» ë°©ëª…ë¡ì„ ì‚­ì œí•˜ë ¤ë©´ ë”ë¸”í´ë¦­í•˜ì„¸ìš”</b>
                    <div>{recordList.reverse()}.</div>
                </div>
            );
        }

        function Footer () {
            return (
                <div className="footer">
                    <button onClick={ () => alert('ë‚˜ê°€ì„¸ìš”') }>ëˆŒëŸ¬ë³´ì„¸ìš”</button>
                </div>
            );
        }


        function App() {
            return (
                <>
                    <Header/>
                    <AddName/>
                    <AddRecord/>
                    <Footer/>
                </>
            );
        }

        ReactDOM.render(<App/>, document.getElementById('root'));

    </script>
</body>
</html>